


<div *ngIf="funcionarioSelected" class="details">

  <div class="form">

    <!-- <div>
      <app-titulo [titulo]="funcionarioSelected.id.toString()"></app-titulo>
    </div> -->
  
    <form [formGroup]="funcionarioForm" (submit)="funcionarioSubmit(file.files)">
  
      <div class="mb-3">
        <label class="form-label">Nome</label>
        <input type="text" formControlName="nome" class="form-control"  >
      </div>
  
      <div class="mb-3">
        <label  class="form-label">RG</label>
        <input type="text" formControlName="rg" class="form-control" >
      </div>
  
      <!-- <div class="mb-3">
        <label class="form-label">Foto</label>
        <input type="text" formControlName="foto" class="form-control" required>
      </div> -->

      <div class="mb-3">
        <label for="form-label">Foto</label>
        <input type="file" #file class="form-control" (change)="uploadSingle($event)">
      <input type="text" formControlName="foto" class="form-control" value="{{updateFotoValue(file.files[0]?.name)}}`">
      
        <div class="col-md-4">
          <span class="upload" *ngIf="progress > 0">
            {{progress}}%
          </span>
          <span class="upload" *ngIf="message">
            {{message}}
          </span>
        </div>
      </div>
      
      <div class="select">
        
        <label class="form-label">Departamento</label>

        <div class="button-select">

          <select name="" id="id-select" formControlName="departamentoId"  required>
      
            <option disabled selected value="0">Selecione o departamento</option>
      
            <option  *ngFor="let departamentos of departamentos" value="{{departamentos.id}}">{{departamentos.nome}}</option>
            
            <div>

            </div>
          </select>

          <button type="submit" class="btn btn-primary"  [disabled]="!funcionarioForm.valid">Salvar</button>

        </div>
      </div>
  
    
  
    </form>

  </div>

</div>

<div *ngIf="!funcionarioSelected">

  <div class="top-body">
    <h1 class="title">{{title}}</h1>
    <button class="new" (click)="funcionarioNew()">Cadastrar Funcionário</button>
  </div>
  
  <table class="table table-hover">
    <thead>
      <tr>
        <th scope="col">ID</th>
        <th scope="col">Foto</th>
        <th scope="col">Nome</th>
        <th scope="col">Departamento</th>
        <th class="col">Opções</th>
      </tr>
    </thead>
  
    <tbody>
      <tr *ngFor="let funcionarios of funcionarios">
        <th scope="row" class="id" >{{funcionarios.id}}</th>
        <td><img [src]="createImgPath(funcionarios.id, funcionarios.foto)" style="width:60px; height:60px;" alt="aaaaaa"></td>
        <td>{{funcionarios.nome}}</td>
        <td>
          <div *ngFor="let departamentos of departamentos">
            <div *ngIf="funcionarios.departamentoId == departamentos.id">
                {{departamentos.sigla}}
            </div>
          </div>
        </td>
        <td>
          <div class="options">
            <button (click)="funcionarioSelect(funcionarios)" class="edit">Editar</button>
            <button class="delete" (click)="funcionarioDelete(funcionarios.id)">Excluir</button>
          </div>
        </td>
      </tr>
    </tbody>
  
  </table>

</div>

